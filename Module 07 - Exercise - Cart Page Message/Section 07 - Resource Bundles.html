<h1>Resource Bundles</h1>
<p>In storefront code, we should avoid hard-coding text strings. Titles, labels, messages, buttons, and field names should all be externalized by using <strong>resource bundles</strong> (also known as properties files). If you do not want to duplicate ISML templates to create locale-specific templates, you can use resource bundles to keep your template generic and reusable.</p>
<p>A resource bundle is a file with a .properties extension that contains the hardcoded strings to be used in ISML templates. In SFRA, bundles are loosely named by the functional area where the strings are used, but you can use any file name and organization you want. By default, they are located at <code>&lt;cartridge_name&gt;\cartridge\templates\resources</code>.</p>
<p><img style="border: 1px solid black;" src="https://sfcclearning.com/wp-content/uploads/2023/01/resources.png.pagespeed.ce.kxEmgkja6J.png" alt="Resource Bundles"></p>
<p>The resource bundles contain key=value pairs, where the key might be compound (e.g., key.subkey) and the value is a hard-coded string that uses Java MessageFormat syntax to implement parameter replacement. Strings from the bundles are accessible to all ISML templates through two methods from the API:</p>
<ul>
    <li><strong>Resource.msg:</strong> Use this method when you only need to retrieve a value.</li>
    <li><strong>Resource.msgf:</strong> Use this method when you need to retrieve a value, passing a parameter that will replace a placeholder (e.g., {0}) in the string.</li>
</ul>
<p>More information can be found <a href="https://documentation.b2c.commercecloud.salesforce.com/DOC1/index.jsp?topic=%2Fcom.demandware.dochelp%2FDWAPI%2Fscriptapi%2Fhtml%2Fapi%2Fclass_dw_web_Resource.html">here</a>.</p>
<p>See some examples of how to define these key=value pairs and how to use them.</p>
<p>Did you notice that some values contain placeholders like {0} and {1}? These are placeholders that will be dynamically replaced by parameters you pass when using <strong>Resource.msgf</strong>. After the third parameter, you can pass any number of values you want as parameters, and inside the resource bundle, they will be identified by {} starting from 0 and incrementing by 1 for each extra parameter you pass. This is the biggest difference between both methods: one only retrieves hard-coded strings that don‚Äôt accept parameters, while the other accepts parameters.</p>
<p><img style="border: 1px solid black;" src="https://sfcclearning.com/wp-content/uploads/2023/01/resources-properties.png" alt="Resource Properties"></p>
<p>Use <strong>Resource.msgf</strong> to replace these placeholders.</p>
<p><img style="border: 1px solid black;" src="https://sfcclearning.com/wp-content/uploads/2023/01/resource-msgf.png" alt="Resource msgf Example"></p>
<p><img style="border: 1px solid black;" src="https://sfcclearning.com/wp-content/uploads/2023/01/resource-msgf.png" alt="Resource msgf Example"></p>
<h2>Localization</h2>
<p>You might be wondering: what do we do when we need the site to support multiple languages or when the site must look different for different countries/languages? For templates, you will create a folder with the country_language code and replicate the subfolders and files from the default folder.</p>
<p>For resource bundles, you will append the country_language code to the name of the file and add the translations to each corresponding file:</p>
<p><img style="border: 1px solid black;" src="https://sfcclearning.com/wp-content/uploads/2023/01/localizing-templates.png.pagespeed.ce.be4NgzmNDW.png" alt="Localizing Templates"></p>
<p><img style="border: 1px solid black;" src="https://sfcclearning.com/wp-content/uploads/2023/01/localizing-resources.png.pagespeed.ce.zIDhvAlzfa.png" alt="Localizing Resources"></p>
<h2>Practical Exercises</h2>
<h3>üìù Exercise: Create an ISML Template</h3>
  <ul>
    <li>On Visual Studio Code, right-click the templates' folder where you want to create your ISML file and choose New File</li>
    <li>Give your file a name + the .isml extension and press ENTER</li>
  </ul>
<h3>üìù Exercise: Set and Retrieve Variables</h3>
  <ul>
    <li>Create a new controller called VarTest</li>
    <li>Create a new ISML template called vartest</li>
    <li>In the template, create a new variable called sessionVar with hardcoded text as the value, set its scope as session and print the value to the page:
      <pre><code>&lt;isset name="sessionVar" value="${1}" scope="session"/&gt;</code></pre>
    </li>
    <li>Display the contents of the sessionVar variable. Its value is: ${session.custom.sessionVar}</li>
    <li>Open a web browser and test the controller.</li>
    <li>Add similar examples using different scopes (request and page) to the vartest template and display them.</li>
    <li>Modify the examples using boolean and string values (i.e., "${false}" and "Hello").</li>
    <li>Test the JavaScript controller again to see the new variable values.</li>
    <li>Increment the variables using the following syntax: "${request.custom.requestVar + 1}"</li>
    <li>Please pay attention to the fact that when you create both Request and Session variables you need to add request.custom.&lt;name&gt; or session.custom.&lt;name&gt; to access the variable. Page variables, on the other hand, can be accessed directly by their name.</li>
  </ul>
<h3>üìù Exercise: Use Local Includes</h3>
  <ul>
    <li>Study the template to include</li>
    <li>Locate and study the productTile.isml template.</li>
    <li>Notice that the first &lt;isset&gt; tag expects pdict.product in the pipeline dictionary.</li>
    <li>Include productTile.isml in your current template</li>
    <li>Create a new controller called ShowProduct with one endpoint where you will retrieve any product using the class ProductMgr</li>
    <li>Send your product to your template</li>
    <li>Open the productfound.isml template.</li>
    <li>Create a new variable named product that receives as value your product being sent from the template:
      <pre><code>&lt;isset name="product" value="${pdict.myProduct}" scope="request"/&gt;</code></pre>
    </li>
    <li>Test the JavaScript controller with an existing product: your_storefront_url&gt;/ShowProduct-Start?pid=P0048M</li>
  </ul>
<h3>üìù Exercise: Use Remote Includes</h3>
  <ul>
    <li>Create 2 endpoints in your controller named: RenderTemplate and TestRemoteInclude</li>
    <li>Create a new ISML template with any dummy text</li>
    <li>In the RenderTemplate endpoint, just render this template</li>
    <li>Create a 2nd ISML template and use a remote include to call your RenderTemplate Controller endpoint</li>
    <li>In the TestRemoteInclude endpoint, render your 2nd template</li>
    <li>On your storefront site URL, call your TestRemoteInclude endpoint</li>
  </ul>
<h3>üìù Exercise: Use a Decorator</h3>
  <ul>
    <li>On Visual Studio Code, using the Search function, locate the common/layout/page/isml template. Notice the different areas of the page this decorator defines.</li>
    <li>Locate the &lt;isdecorate&gt; tag.</li>
    <li>Open the controller that you created in the previous exercise and create a new endpoint called TestDecorator</li>
    <li>Create a new ISML template to be rendered by this new endpoint</li>
    <li>Inside your ISML template add the following:
      <pre><code>&lt;isdecorate template="common/layout/page"&gt;
	..existing content..
&lt;/isdecorate&gt;</code></pre>
    </li>
    <li>Test the endpoint</li>
  </ul>
<h3>üìù Exercise: Bonus Track</h3>
  <ul>
    <li>Use a Custom Tag</li>
    <li>Create a Basket JavaScript Controller and Use a Loop in ISML</li>
    <li>Using Resource Bundles</li>
  </ul>
